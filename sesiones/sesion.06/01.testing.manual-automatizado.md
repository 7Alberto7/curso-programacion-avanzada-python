# 🧭 Sesión 6 · Punto 1 — Testing profesional: manuales vs automatizados

## 🎯 Objetivos específicos

* Entender la diferencia entre **tests manuales** y **tests automatizados**.
* Conocer los beneficios de automatizar pruebas en Python.
* Introducir las herramientas estándar de testing en Python (`unittest`, `pytest`).
* Aprender a escribir **asserts** efectivos y legibles.

---

## 📚 Resumen teórico-práctico

### 🔹 Testing manual

* El programador ejecuta el código a mano, observa resultados y decide si son correctos.
* Ejemplo típico: añadir `print()` en el código o lanzar funciones en consola interactiva.

```python
from app.modelos import Usuario

u = Usuario("Ana", "ana@test.com")
print(u.presentarse())  # comprobación manual
```

👉 Pros: rápido, fácil para prototipos.
👉 Contras: repetitivo, propenso a errores humanos, no escalable.

---

### 🔹 Testing automatizado

* El programador escribe **scripts de prueba** que se ejecutan solos y validan el comportamiento con `assert`.
* Los tests se pueden repetir todas las veces que haga falta.

Ejemplo con `unittest`:

```python
import unittest
from app.modelos import Usuario

class TestUsuario(unittest.TestCase):
    def test_presentarse(self):
        u = Usuario("Ana", "ana@test.com")
        self.assertEqual(u.presentarse(), "Soy Ana (ana@test.com)")

if __name__ == "__main__":
    unittest.main()
```

Ejecución:

```bash
python -m unittest discover -s tests
```

👉 Pros: repetible, confiable, se integra en CI/CD.
👉 Contras: requiere inversión inicial de tiempo.

---

### 🔹 Buenas prácticas con `assert`

* Siempre probar **casos correctos** y **errores esperados**.
* Mensajes claros en caso de fallo.

```python
def test_email_invalido(self):
    with self.assertRaises(ValueError):
        Usuario("Luis", "sin-arroba")
```

---

### 🔹 Frameworks principales

* **unittest** → estándar en la librería de Python.
* **pytest** → más conciso, muy popular en proyectos modernos.
* **doctest** → incrusta ejemplos en docstrings.

---

## 🧩 Mini-ejercicios rápidos

1. Escribe un test manual en `main.py` para crear un `Admin` y verificar con `print` que los permisos incluyen `"borrar"`.
2. Convierte ese test manual en un test automatizado con `unittest`.
3. Escribe un test que verifique que `RepositorioUsuarios` lanza `ValueError` al agregar dos usuarios con el mismo email.

---

## ✅ Checklist de dominio

* [ ] ¿Sé diferenciar entre **probar manualmente** con `print` y **tests automatizados** con `assert`?
* [ ] ¿Entiendo cómo usar `unittest.TestCase` y `self.assertEqual / self.assertRaises`?
* [ ] ¿Sé lanzar todos los tests con `python -m unittest discover`?
* [ ] ¿Reconozco que el testing automatizado es esencial para proyectos profesionales?