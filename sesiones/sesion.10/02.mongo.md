# ðŸ§­ SesiÃ³n 10 Â· Punto 2 â€” MongoDB con `pymongo`

## ðŸŽ¯ Objetivos especÃ­ficos

* Conectarse a una base de datos **NoSQL MongoDB** desde Python usando `pymongo`.
* Comprender el modelo de documentos (JSON-like) frente al modelo tabular de SQL.
* Realizar operaciones CRUD (Create, Read, Update, Delete).
* Conocer diferencias clave entre SQL y NoSQL en proyectos reales.

---

## ðŸ“š Resumen teÃ³rico-prÃ¡ctico

### ðŸ”¹ ConexiÃ³n a MongoDB

```python
from pymongo import MongoClient

# ConexiÃ³n local (puede ser Atlas en cloud)
client = MongoClient("mongodb://localhost:27017")

# SelecciÃ³n de base de datos y colecciÃ³n
db = client["miapp"]
usuarios = db["usuarios"]
```

ðŸ‘‰ En MongoDB, una **base de datos** contiene **colecciones**, que contienen **documentos JSON-like**.

---

### ðŸ”¹ Operaciones CRUD

**Insertar documentos**

```python
# Insertar uno
usuarios.insert_one({"nombre": "Ana", "email": "ana@test.com", "edad": 30})

# Insertar varios
usuarios.insert_many([
    {"nombre": "Luis", "email": "luis@test.com", "edad": 25},
    {"nombre": "Marta", "email": "marta@test.com", "edad": 28}
])
```

**Leer documentos**

```python
# Consultar todos
for u in usuarios.find():
    print(u)

# Filtrar por condiciÃ³n
for u in usuarios.find({"edad": {"$gt": 26}}):
    print(u)
```

**Actualizar documentos**

```python
# Actualizar uno
usuarios.update_one(
    {"nombre": "Ana"},
    {"$set": {"email": "ana@example.com"}}
)

# Actualizar varios
usuarios.update_many(
    {"edad": {"$lt": 30}},
    {"$inc": {"edad": 1}}
)
```

**Borrar documentos**

```python
# Borrar uno
usuarios.delete_one({"nombre": "Luis"})

# Borrar varios
usuarios.delete_many({"edad": {"$lt": 30}})
```

---

### ðŸ”¹ Consultas mÃ¡s avanzadas

```python
# ProyecciÃ³n de campos
for u in usuarios.find({}, {"nombre": 1, "_id": 0}):
    print(u)

# Ordenar resultados
for u in usuarios.find().sort("edad", -1):  # -1 = descendente
    print(u)
```

---

### ðŸ”¹ Diferencias clave SQL vs NoSQL

| Aspecto       | SQL (SQLite/MySQL)      | NoSQL (MongoDB)             |
| ------------- | ----------------------- | --------------------------- |
| Modelo datos  | Tablas / filas          | Documentos JSON-like        |
| Esquema       | Fijo (declarado)        | Flexible (dinÃ¡mico)         |
| Relaciones    | JOINs entre tablas      | Embedding / referencias     |
| Escalabilidad | Vertical (mÃ¡s recursos) | Horizontal (sharding fÃ¡cil) |
| Casos de uso  | ERP, facturaciÃ³n, BI    | Logs, catÃ¡logos, IoT, APIs  |

---

## ðŸ§© Mini-ejercicios rÃ¡pidos

1. Inserta 3 usuarios en la colecciÃ³n `usuarios`.
2. Recupera solo los usuarios mayores de 27 aÃ±os.
3. Actualiza el campo `activo=True` para todos los usuarios.
4. Borra los usuarios cuyo email termine en `@test.com`.
5. Explica con tus palabras quÃ© ventajas aporta MongoDB frente a SQLite.

---

## âœ… Checklist de dominio

* [ ] Â¿SÃ© conectar a MongoDB con `pymongo`?
* [ ] Â¿SÃ© realizar operaciones CRUD en una colecciÃ³n?
* [ ] Â¿Puedo aplicar filtros con operadores (`$gt`, `$lt`, `$set`, `$inc`)?
* [ ] Â¿Entiendo diferencias clave entre SQL y NoSQL?