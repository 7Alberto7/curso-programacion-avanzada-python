# 🧭 Sesión 9 · Punto 3 — Pickle, JSON y XML

## 🎯 Objetivos específicos

* Comprender qué es **serialización** y por qué es útil en persistencia e intercambio de datos.
* Aprender a guardar y cargar objetos con **Pickle** (binario, Python-específico).
* Manejar datos en formato **JSON** (texto, multiplataforma).
* Crear y procesar datos en **XML** (estructurado, verboso).
* Comparar ventajas y limitaciones de cada formato.

---

## 📚 Resumen teórico-práctico

### 🔹 Pickle (binario, específico de Python)

Guarda cualquier objeto de Python en binario.

```python
import pickle

datos = {"usuario": "Ana", "activo": True, "edad": 30}

# Guardar en binario
with open("datos.pkl", "wb") as f:
    pickle.dump(datos, f)

# Cargar de binario
with open("datos.pkl", "rb") as f:
    cargado = pickle.load(f)

print(cargado)  # {'usuario': 'Ana', 'activo': True, 'edad': 30}
```

👉 Pros: soporta casi cualquier objeto.
👉 Contras: no portable entre lenguajes, **no seguro** si los datos no son de confianza.

---

### 🔹 JSON (texto estándar, portable)

El más usado para APIs y persistencia ligera.

```python
import json

datos = {"usuario": "Ana", "activo": True, "edad": 30}

# Guardar en JSON legible
with open("datos.json", "w", encoding="utf-8") as f:
    json.dump(datos, f, ensure_ascii=False, indent=2)

# Cargar de JSON
with open("datos.json", "r", encoding="utf-8") as f:
    cargado = json.load(f)

print(cargado)
```

👉 Pros: estándar, legible, multiplataforma.
👉 Contras: solo admite tipos básicos (dict, list, str, int, bool).

---

### 🔹 XML (texto estructurado con etiquetas)

Más usado en configuraciones y sistemas legacy.

```python
import xml.etree.ElementTree as ET

# Crear XML
root = ET.Element("usuario")
ET.SubElement(root, "nombre").text = "Ana"
ET.SubElement(root, "activo").text = "true"
ET.SubElement(root, "edad").text = "30"

tree = ET.ElementTree(root)
tree.write("datos.xml", encoding="utf-8", xml_declaration=True)

# Leer XML
tree = ET.parse("datos.xml")
root = tree.getroot()
for child in root:
    print(child.tag, ":", child.text)
```

👉 Pros: jerárquico, validable con esquemas (XSD).
👉 Contras: verboso y menos eficiente que JSON.

---

### 🔹 Comparativa rápida

| Formato | Legible | Multiplataforma | Objetos complejos | Casos de uso                      |
| ------- | ------- | --------------- | ----------------- | --------------------------------- |
| Pickle  | ❌ No    | ❌ No            | ✅ Sí              | Guardar objetos Python en local   |
| JSON    | ✅ Sí    | ✅ Sí            | ❌ No              | APIs, intercambio entre sistemas  |
| XML     | ✅ Sí    | ✅ Sí            | ❌ Limitado        | Configuración, integración legacy |

---

## 🧩 Mini-ejercicios rápidos

1. Serializa un objeto `Usuario(nombre, email)` con Pickle y recárgalo.
2. Guarda una lista de diccionarios en JSON y vuelve a cargarla.
3. Genera un XML de inventario de productos con campos `nombre`, `precio`, `stock`.
4. Escribe una función que convierta un JSON en XML y viceversa.

---

## ✅ Checklist de dominio

* [ ] ¿Sé serializar objetos con Pickle y cargarlos de nuevo?
* [ ] ¿Sé guardar y leer JSON con `json.dump` y `json.load`?
* [ ] ¿Sé construir y recorrer un árbol XML con `ElementTree`?
* [ ] ¿Conozco cuándo elegir JSON frente a Pickle o XML?